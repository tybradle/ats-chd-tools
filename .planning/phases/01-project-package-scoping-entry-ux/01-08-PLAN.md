---
phase: 01-project-package-scoping-entry-ux
plan: 08
type: execute
wave: 7
depends_on:
  - 01-05
  - 01-06
  - 01-07
files_modified: []
autonomous: false
gap_closure: true

must_haves:
  truths:
    - "Entering /bom is blocked by Project Manager until a Package is selected"
    - "After edits (pending writes), switching package scope does not hang and results in new scope data"
  artifacts:
    - path: ".planning/phases/01-project-package-scoping-entry-ux/01-project-package-scoping-entry-ux-VERIFICATION.md"
      provides: "Gap definitions and acceptance behaviors"
  key_links:
    - from: "src/pages/bom.tsx"
      to: "ProjectManagerDialog"
      via: "blocking open state"
      pattern: "open=\{isProjectManagerOpen\}"
    - from: "src/stores/bom-store.ts"
      to: "flushPendingWrites"
      via: "await before scope change"
      pattern: "flushPendingWrites"
---

<objective>
Human verification of Phase 1 gap closures (blocking BOM entry gating + safe scope switching).

Purpose: Confirm interactive dialog behavior and race-condition resilience in a real Tauri + SQLite run.
Output: User approval (or actionable issues) to proceed.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01-project-package-scoping-entry-ux/01-project-package-scoping-entry-ux-VERIFICATION.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Gap closure verification for Phase 1:
- BOM entry gating is truly blocking in all BomPage branches
- flushPendingWrites cannot hang scope switching
  </what-built>
  <how-to-verify>
1) Start the app:
   - `npm run tauri:dev`

2) BOM entry gating:
   - Navigate to the BOM module (Home tile -> BOM Translation, or direct `/bom`).
   - Expected: Project Manager dialog opens immediately.
   - Try to dismiss it before selecting a package:
     a) Press ESC
     b) Click outside the dialog
   - Expected: dialog stays open (cannot close) until a package is selected.

3) Scope switch stability:
   - Create/select a project and package A, enter workspace.
   - Make a change that creates a write (e.g., any edit flow that triggers autosave/persistence).
   - Immediately open Project Manager (Change button) and switch to package B.
   - Expected: app does not hang. It eventually switches scope and shows package B data.

4) Regression smoke:
   - Confirm landing page still shows disabled tiles labeled “Coming soon” for non-ready modules.
  </how-to-verify>
  <resume-signal>
Type "approved" if all checks pass, or describe the failing step(s) and what you observed.
  </resume-signal>
</task>

</tasks>

<verification>
- User confirms all steps in checkpoint pass.
</verification>

<success_criteria>
- All Phase 1 verification gaps are closed and Phase 1 is ready to re-run verifier.
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-package-scoping-entry-ux/01-08-SUMMARY.md`
</output>
